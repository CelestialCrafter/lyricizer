cflags = -Wall
ldflags = -lmpdclient -ltoml -lcurl

rule cc
    command = cc $cflags -c $in -o $out

rule link
    command = cc $in -o $out $ldflags

build build/options.o: cc src/options.c
build build/mpd.o: cc src/mpd.c
build build/lyrics_fetch.o: cc src/lyrics_fetch.c
build build/lyrics_save.o: cc src/lyrics_save.c
build build/main.o: cc src/main.c
build build/lyricizer: link build/main.o build/mpd.o build/lyrics_fetch.o build/lyrics_save.o build/options.o

default build/lyricizer
